import React, { useState, useEffect, useRef } from 'react';

const ConsciousnessInterface = () => {
  // State for tracking mental processes and user interactions
  const [currentView, setCurrentView] = useState('overview');
  const [mentalState, setMentalState] = useState({
    focus: 50,
    creativity: 30,
    stress: 40
  });
  const [neuralConnections, setNeuralConnections] = useState([]);
  const [thoughtStream, setThoughtStream] = useState('');
  const [awarenessLevel, setAwarenessLevel] = useState('Alpha');
  const [deepModeActive, setDeepModeActive] = useState(false);
  const [interactionCount, setInteractionCount] = useState(0);
  const [processingState, setProcessingState] = useState('idle');
  
  // References for direct neural network manipulation
  const canvasRef = useRef(null);
  const updateInterval = useRef(null);

  // Psychological color schemes that influence mood and perception
  const consciousnessThemes = {
    Alpha: ['#8B5CF6', '#EC4899', '#3B82F6'],    // Creative and relaxed
    Beta: ['#F97316', '#EF4444', '#F59E0B'],     // Alert and focused
    Theta: ['#10B981', '#06B6D4', '#8B5CF6'],    // Deep and intuitive
    Delta: ['#6366F1', '#8B5CF6', '#EC4899'],    // Restorative and peaceful
    Gamma: ['#EC4899', '#F97316', '#EF4444']     // High-performance thinking
  };

  // Initialize neural network visualization that represents mental connections
  useEffect(() => {
    const generateNeuralNetwork = () => {
      const connections = [];
      for (let i = 0; i < 25; i++) {
        connections.push({
          id: i,
          x: Math.random() * 800,
          y: Math.random() * 400,
          active: Math.random() > 0.6,
          strength: Math.random(),
          connections: Math.floor(Math.random() * 4) + 1
        });
      }
      setNeuralConnections(connections);
    };

    generateNeuralNetwork();
    
    // Simulate dynamic neural activity - like real thought processes
    updateInterval.current = setInterval(() => {
      setNeuralConnections(prev => prev.map(connection => ({
        ...connection,
        active: Math.random() > 0.5,
        x: connection.x + (Math.random() - 0.5) * 3,
        y: connection.y + (Math.random() - 0.5) * 3,
        strength: Math.max(0.1, Math.min(1, connection.strength + (Math.random() - 0.5) * 0.1))
      })));
    }, 2500);

    return () => clearInterval(updateInterval.current);
  }, []);

  // Monitor mental state changes and adjust awareness level accordingly
  useEffect(() => {
    const { focus, creativity, stress } = mentalState;
    const mentalBalance = (focus + creativity + (100 - stress)) / 3;
    
    if (mentalBalance > 85) setAwarenessLevel('Gamma');
    else if (mentalBalance > 65) setAwarenessLevel('Beta');
    else if (mentalBalance > 45) setAwarenessLevel('Alpha');
    else if (mentalBalance > 25) setAwarenessLevel('Theta');
    else setAwarenessLevel('Delta');
  }, [mentalState]);

  // Track component lifecycle and re-rendering for performance psychology
  useEffect(() => {
    setProcessingState('updating');
    const timer = setTimeout(() => setProcessingState('stable'), 300);
    return () => {
      clearTimeout(timer);
      setProcessingState('transitioning');
    };
  }, [currentView]);

  // Functions for managing psychological state
  const adjustMentalState = (aspect, value) => {
    setMentalState(prev => ({
      ...prev,
      [aspect]: parseInt(value)
    }));
    setInteractionCount(prev => prev + 1);
  };

  const handleThoughtInput = (e) => {
    setThoughtStream(e.target.value);
    setInteractionCount(prev => prev + 1);
    // Simulate cognitive load based on thought complexity
    const wordCount = e.target.value.split(' ').length;
    if (wordCount > 10) {
      setMentalState(prev => ({ ...prev, focus: Math.min(100, prev.focus + 2) }));
    }
  };

  const activateDeepMode = () => {
    setDeepModeActive(prev => !prev);
    if (!deepModeActive) {
      // Deep mode optimizes mental state for peak performance
      setMentalState({
        focus: 95,
        creativity: 90,
        stress: 15
      });
    } else {
      // Return to baseline natural state
      setMentalState({
        focus: 50,
        creativity: 30,
        stress: 40
      });
    }
  };

  // Psychological insights for different interface patterns
  const mentalProcesses = [
    {
      name: 'State Management',
      description: 'How the mind tracks and updates multiple streams of information simultaneously',
      example: 'Managing attention, emotion, and memory in parallel processes',
      icon: 'üß†'
    },
    {
      name: 'Effect Processing',
      description: 'Responding to environmental changes and updating behavior patterns',
      example: 'Adapting interface responses based on user interaction patterns',
      icon: '‚ö°'
    },
    {
      name: 'Reference Memory',
      description: 'Direct access to specific memories and experiences without conscious filtering',
      example: 'Instant recall of familiar interface patterns and navigation habits',
      icon: 'üíæ'
    },
    {
      name: 'Custom Processing',
      description: 'Creating personalized mental shortcuts and automated response patterns',
      example: 'Developing user-specific workflows that feel intuitive and effortless',
      icon: 'üéØ'
    }
  ];

  const currentColors = consciousnessThemes[awarenessLevel];

  return (
    <div className="min-h-screen p-6" style={{
      background: `linear-gradient(135deg, ${currentColors[0]}, ${currentColors[1]}, ${currentColors[2]})`
    }}>
      {/* Interface Header */}
      <header className="bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-2xl p-6 mb-8 border border-white border-opacity-20">
        <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between">
          <div>
            <h1 className="text-4xl font-bold text-white mb-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
              Dynamic Interface Psychology
            </h1>
            <p className="text-gray-300">
              Exploring how interactive components mirror and influence human cognitive processes
            </p>
          </div>
          <div className="mt-4 lg:mt-0 flex items-center space-x-4">
            <div className="bg-gray-800 px-4 py-2 rounded-lg">
              <span className="text-gray-400 text-sm">Awareness: </span>
              <span className="text-white font-bold">{awarenessLevel}</span>
            </div>
            <div className="bg-gray-800 px-4 py-2 rounded-lg">
              <span className="text-gray-400 text-sm">Interactions: </span>
              <span className="text-white font-bold">{interactionCount}</span>
            </div>
          </div>
        </div>
      </header>

      {/* Navigation Psychology */}
      <nav className="bg-gray-900 bg-opacity-60 backdrop-blur-md rounded-xl p-4 mb-8 border border-white border-opacity-10">
        <div className="flex flex-wrap justify-center space-x-2 space-y-2 lg:space-y-0">
          {['overview', 'states', 'processing', 'effects', 'patterns'].map((view) => (
            <button
              key={view}
              onClick={() => setCurrentView(view)}
              className={`px-6 py-2 rounded-lg font-medium transition-all duration-300 transform hover:scale-105 ${
                currentView === view
                  ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg'
                  : 'bg-gray-800 text-gray-300 hover:bg-gray-700'
              }`}
            >
              {view.charAt(0).toUpperCase() + view.slice(1)}
            </button>
          ))}
        </div>
      </nav>

      {/* Main Interface Layout */}
      <main className="grid lg:grid-cols-3 gap-8">
        {/* Mental State Controls */}
        <div className="lg:col-span-1 space-y-6">
          {/* Psychological State Adjustment */}
          <div className="bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-xl p-6 border border-white border-opacity-20">
            <h3 className="text-xl font-bold text-white mb-4 flex items-center">
              üéõÔ∏è Mental State Controls
            </h3>
            
            {Object.entries(mentalState).map(([aspect, value]) => (
              <div key={aspect} className="mb-4">
                <label className="block text-gray-300 text-sm font-medium mb-2 capitalize">
                  {aspect}: {value}%
                </label>
                <input
                  type="range"
                  min="0"
                  max="100"
                  value={value}
                  onChange={(e) => adjustMentalState(aspect, e.target.value)}
                  className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                  style={{
                    background: `linear-gradient(to right, ${currentColors[0]} 0%, ${currentColors[1]} 50%, ${currentColors[2]} 100%)`
                  }}
                />
                <div className="mt-2 bg-gray-800 rounded-lg overflow-hidden">
                  <div 
                    className="h-2 transition-all duration-500 ease-out"
                    style={{
                      width: `${value}%`,
                      background: `linear-gradient(90deg, ${currentColors[0]}, ${currentColors[1]})`
                    }}
                  />
                </div>
              </div>
            ))}

            <button
              onClick={activateDeepMode}
              className={`w-full mt-4 px-4 py-2 rounded-lg font-medium transition-all duration-300 ${
                deepModeActive
                  ? 'bg-gradient-to-r from-green-500 to-blue-500 text-white'
                  : 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
              }`}
            >
              {deepModeActive ? 'üöÄ Peak Performance Active' : 'üßò‚Äç‚ôÄÔ∏è Activate Deep Mode'}
            </button>
          </div>

          {/* Thought Stream Interface */}
          <div className="bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-xl p-6 border border-white border-opacity-20">
            <h3 className="text-xl font-bold text-white mb-4">üí≠ Thought Stream</h3>
            <textarea
              value={thoughtStream}
              onChange={handleThoughtInput}
              placeholder="Express your thoughts... Notice how typing affects your mental state indicators"
              className="w-full h-32 bg-gray-800 text-white border border-gray-600 rounded-lg p-3 focus:border-purple-500 focus:outline-none resize-none"
            />
            <div className="mt-2 text-sm text-gray-400">
              Complexity: {thoughtStream.split(' ').filter(w => w.length > 0).length} words | 
              Mental Load: {Math.min(100, thoughtStream.length / 5)}%
            </div>
          </div>

          {/* Neural Activity Visualization */}
          <div className="bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-xl p-6 border border-white border-opacity-20">
            <h3 className="text-xl font-bold text-white mb-4">üåê Neural Activity</h3>
            <div className="relative h-48 bg-gray-800 rounded-lg overflow-hidden">
              <svg width="100%" height="100%" className="absolute inset-0">
                {neuralConnections.map((neuron, index) => (
                  <g key={neuron.id}>
                    {/* Neural Connections */}
                    {neuralConnections.slice(index + 1, index + neuron.connections + 1).map((target) => (
                      <line
                        key={`${neuron.id}-${target.id}`}
                        x1={`${(neuron.x / 800) * 100}%`}
                        y1={`${(neuron.y / 400) * 100}%`}
                        x2={`${(target.x / 800) * 100}%`}
                        y2={`${(target.y / 400) * 100}%`}
                        stroke={neuron.active ? currentColors[1] : '#4B5563'}
                        strokeWidth={neuron.strength * 2}
                        opacity={neuron.active ? 0.8 : 0.3}
                        className="transition-all duration-500"
                      />
                    ))}
                    {/* Neural Nodes */}
                    <circle
                      cx={`${(neuron.x / 800) * 100}%`}
                      cy={`${(neuron.y / 400) * 100}%`}
                      r={neuron.active ? 5 : 3}
                      fill={neuron.active ? currentColors[0] : '#6B7280'}
                      className="transition-all duration-500"
                      opacity={neuron.strength}
                    />
                  </g>
                ))}
              </svg>
            </div>
            <div className="mt-2 text-sm text-gray-400">
              Active Connections: {neuralConnections.filter(n => n.active).length} / {neuralConnections.length}
            </div>
          </div>
        </div>

        {/* Main Content Display */}
        <div className="lg:col-span-2">
          <div className="bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-xl p-8 border border-white border-opacity-20 min-h-96">
            
            {currentView === 'overview' && (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-white mb-6">Component-Based Mental Architecture</h2>
                <p className="text-gray-300 text-lg leading-relaxed">
                  Interactive interfaces mirror human cognitive processes. Each component maintains its own psychological state 
                  while communicating with others through structured patterns that feel natural and intuitive to users.
                </p>
                
                <div className="grid md:grid-cols-2 gap-6 mt-8">
                  {mentalProcesses.map((process, index) => (
                    <div
                      key={index}
                      className="bg-gray-800 bg-opacity-60 backdrop-blur-sm rounded-lg p-6 border border-gray-600 hover:border-purple-500 transition-all duration-300 transform hover:scale-105"
                    >
                      <div className="text-3xl mb-3">{process.icon}</div>
                      <h3 className="text-xl font-bold text-white mb-2">{process.name}</h3>
                      <p className="text-gray-300 mb-4">{process.description}</p>
                      <div className="bg-gray-900 text-green-400 p-3 rounded text-sm">
                        Example: {process.example}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {currentView === 'states' && (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-white mb-6">State Management Psychology</h2>
                <p className="text-gray-300 text-lg leading-relaxed">
                  Mental states are dynamic and interconnected. Changes in one area ripple through the entire cognitive system, 
                  much like how component state updates trigger re-renders throughout an interface.
                </p>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6 text-center">
                    <h3 className="text-lg font-bold text-white mb-4">Current State</h3>
                    <div className="text-3xl mb-2">{currentView}</div>
                    <div className="text-sm text-gray-400">Interface Focus</div>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6 text-center">
                    <h3 className="text-lg font-bold text-white mb-4">Deep Mode</h3>
                    <div className="text-3xl mb-2">{deepModeActive ? 'üü¢' : 'üî¥'}</div>
                    <div className="text-sm text-gray-400">Performance State</div>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6 text-center">
                    <h3 className="text-lg font-bold text-white mb-4">Connections</h3>
                    <div className="text-3xl mb-2">{neuralConnections.length}</div>
                    <div className="text-sm text-gray-400">Neural Network Size</div>
                  </div>
                </div>

                <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                  <h3 className="text-xl font-bold text-white mb-4">Mental State Object</h3>
                  <pre className="bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto">
{JSON.stringify({
  mentalState,
  awarenessLevel,
  deepModeActive,
  processingState,
  thoughtComplexity: thoughtStream.split(' ').length
}, null, 2)}
                  </pre>
                </div>
              </div>
            )}

            {currentView === 'processing' && (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-white mb-6">Cognitive Processing Patterns</h2>
                <p className="text-gray-300 text-lg leading-relaxed">
                  The mind processes information through predictable patterns. Understanding these patterns allows 
                  interfaces to work with natural cognitive flows rather than against them.
                </p>
                <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                  <h3 className="text-xl font-bold text-white mb-4">Current Processing State</h3>
                  <div className="flex items-center space-x-4 mb-4">
                    <div className={`w-4 h-4 rounded-full ${processingState === 'updating' ? 'bg-yellow-400' : 'bg-gray-600'}`}></div>
                    <span className="text-gray-300">Updating</span>
                  </div>
                  <div className="flex items-center space-x-4 mb-4">
                    <div className={`w-4 h-4 rounded-full ${processingState === 'stable' ? 'bg-green-400' : 'bg-gray-600'}`}></div>
                    <span className="text-gray-300">Stable</span>
                  </div>
                  <div className="flex items-center space-x-4 mb-4">
                    <div className={`w-4 h-4 rounded-full ${processingState === 'transitioning' ? 'bg-blue-400' : 'bg-gray-600'}`}></div>
                    <span className="text-gray-300">Transitioning</span>
                  </div>
                </div>

                <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                  <h3 className="text-xl font-bold text-white mb-4">Processing Dependencies</h3>
                  <p className="text-gray-300 mb-4">
                    This interface uses multiple processing layers with different dependency patterns:
                  </p>
                  <ul className="space-y-2 text-gray-300">
                    <li>‚Ä¢ <code className="bg-gray-900 px-2 py-1 rounded text-green-400">State changes</code> trigger immediate visual updates</li>
                    <li>‚Ä¢ <code className="bg-gray-900 px-2 py-1 rounded text-green-400">Mental state shifts</code> influence awareness level calculations</li>
                    <li>‚Ä¢ <code className="bg-gray-900 px-2 py-1 rounded text-green-400">View transitions</code> update processing indicators</li>
                    <li>‚Ä¢ <code className="bg-gray-900 px-2 py-1 rounded text-green-400">Neural activity</code> runs independently in background</li>
                  </ul>
                </div>
              </div>
            )}

            {currentView === 'effects' && (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-white mb-6">Psychological Side Effects</h2>
                <p className="text-gray-300 text-lg leading-relaxed">
                  Every interface interaction has psychological side effects. Colors influence mood, animations affect attention, 
                  and feedback timing shapes user confidence and satisfaction.
                </p>
                <div className="space-y-4">
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Color Psychology Effects</h3>
                    <p className="text-gray-300">Current color scheme: <strong>{awarenessLevel}</strong> - designed to {
                      awarenessLevel === 'Gamma' ? 'stimulate high-performance thinking' :
                      awarenessLevel === 'Beta' ? 'maintain alert focus' :
                      awarenessLevel === 'Alpha' ? 'encourage creative relaxation' :
                      awarenessLevel === 'Theta' ? 'support deep intuitive processing' :
                      'promote restorative calm'
                    }</p>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Interaction Feedback</h3>
                    <p className="text-gray-300">Every control adjustment provides immediate visual feedback, creating positive reinforcement loops that encourage continued engagement and exploration.</p>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Performance Psychology</h3>
                    <p className="text-gray-300">Smooth transitions and responsive interactions create feelings of control and competence, while laggy responses trigger frustration and abandonment behaviors.</p>
                  </div>
                </div>
              </div>
            )}

            {currentView === 'patterns' && (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-white mb-6">Behavioral Design Patterns</h2>
                <p className="text-gray-300 text-lg leading-relaxed">
                  Interface patterns that align with natural human psychology create intuitive experiences. 
                  These patterns reduce cognitive load and increase user satisfaction.
                </p>
                <div className="space-y-4">
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Progressive Disclosure</h3>
                    <p className="text-gray-300">Information is revealed gradually as users demonstrate readiness, preventing cognitive overload while maintaining access to advanced features.</p>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Immediate Feedback</h3>
                    <p className="text-gray-300">Every user action triggers immediate visual response, creating satisfying feedback loops that encourage exploration and build confidence.</p>
                  </div>
                  <div className="bg-gray-800 bg-opacity-60 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-white mb-3">Natural Metaphors</h3>
                    <p className="text-gray-300">Interface elements use familiar metaphors (sliders for adjustment, connections for relationships) that map to existing mental models.</p>
                  </div>
                </div>

                <div className="bg-yellow-900 bg-opacity-40 border border-yellow-500 rounded-lg p-6">
                  <h3 className="text-xl font-bold text-yellow-300 mb-4">üéØ Design Psychology Insight</h3>
                  <p className="text-yellow-100">
                    This interface demonstrates how modern component architecture can mirror natural cognitive processes. 
                    Each state change, effect trigger, and interaction pattern is designed to feel psychologically natural, 
                    reducing the mental effort required to understand and use the interface.
                  </p>
                </div>
              </div>
            )}
          </div>
        </div>
      </main>

      {/* Performance Psychology Metrics */}
      <footer className="mt-8 bg-gray-900 bg-opacity-80 backdrop-blur-md rounded-xl p-6 border border-white border-opacity-20">
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
          <div>
            <div className="text-2xl font-bold text-white">{neuralConnections.filter(n => n.active).length}</div>
            <div className="text-gray-400 text-sm">Active Neural Pathways</div>
          </div>
          <div>
            <div className="text-2xl font-bold text-white">{Math.round((mentalState.focus + mentalState.creativity + (100 - mentalState.stress)) / 3)}%</div>
            <div className="text-gray-400 text-sm">Mental Efficiency</div>
          </div>
          <div>
            <div className="text-2xl font-bold text-white">{thoughtStream.split(' ').filter(w => w.length > 0).length}</div>
            <div className="text-gray-400 text-sm">Cognitive Complexity</div>
          </div>
          <div>
            <div className="text-2xl font-bold text-white">{interactionCount}</div>
            <div className="text-gray-400 text-sm">Interface Interactions</div>
          </div>
        </div>
        
        <div className="mt-6 pt-4 border-t border-gray-700 text-center">
          <p className="text-gray-400 text-sm mb-2">
            Dynamic psychology interface crafted with modern component architecture
          </p>
          <div className="flex justify-center space-x-3">
            <span className="px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs rounded-full">React Hooks</span>
            <span className="px-3 py-1 bg-gradient-to-r from-pink-500 to-blue-500 text-white text-xs rounded-full">State Management</span>
            <span className="px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white text-xs rounded-full">Component Architecture</span>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default ConsciousnessInterface;